(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./src/editForm/EditForm.less":function(e,n,t){},"./src/editForm/EditForm.mdx":function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return _}));var a=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),i=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),s=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),d=(t("./node_modules/antd/es/message/style/index.js"),t("./node_modules/antd/es/message/index.js")),r=(t("./node_modules/antd/es/button/style/index.js"),t("./node_modules/antd/es/button/index.js")),l=(t("./node_modules/antd/es/modal/style/index.js"),t("./node_modules/antd/es/modal/index.js")),u=(t("./node_modules/antd/es/radio/style/index.js"),t("./node_modules/antd/es/radio/index.js")),c=(t("./node_modules/antd/es/input/style/index.js"),t("./node_modules/antd/es/input/index.js")),m=(t("./node_modules/antd/es/input-number/style/index.js"),t("./node_modules/antd/es/input-number/index.js")),b=(t("./node_modules/antd/es/form/style/index.js"),t("./node_modules/antd/es/form/index.js")),p=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),f=t("react"),h=t.n(f),j=t("./node_modules/@mdx-js/react/dist/esm.js"),O=t("./node_modules/father/node_modules/docz/dist/index.esm.js"),F=(t("./node_modules/antd/dist/antd.css"),t("./src/editForm/EditForm.tsx")),y={};function _(e){var n=e.components,t=Object(p.a)(e,["components"]);return Object(j.b)("wrapper",Object.assign({},y,t,{components:n,mdxType:"MDXLayout"}),Object(j.b)("h1",{id:"\u7f16\u8f91\u8868\u5355"},"\u7f16\u8f91\u8868\u5355"),Object(j.b)("p",null,"\u901a\u8fc7\u914d\u7f6e\u8868\u5355\u9879\u3001\u65b0\u589e\u3001\u4fee\u6539\u3001\u83b7\u53d6\u8be6\u60c5\u7684\u65b9\u6cd5\uff0c\u5373\u53ef\u5f97\u5230\u4e00\u4e2a\u7f16\u8f91\u8868\u5355\u3002"),Object(j.b)("p",null,"\u7f16\u8f91\u8868\u5355\u5177\u67093\u79cd\u72b6\u6001"),Object(j.b)("ul",null,Object(j.b)("li",{parentName:"ul"},"\u65b0\u589e--source\u5c5e\u6027\u4e3a\u7a7a"),Object(j.b)("li",{parentName:"ul"},"\u7f16\u8f91--source\u5c5e\u6027\u4e0d\u4e3a\u7a7a\uff0cupdateFunction\u4e0d\u4e3a\u7a7a"),Object(j.b)("li",{parentName:"ul"},"\u9605\u8bfb--source\u5c5e\u6027\u4e0d\u4e3a\u7a7a\uff0cupdateFunction\u4e3a\u7a7a")),Object(j.b)("p",null,"\u7f16\u8f91\u8868\u5355\u4e3a\u4f60\u5904\u7406\u4e86"),Object(j.b)("ul",null,Object(j.b)("li",{parentName:"ul"},"\u6839\u636e\u4e0d\u540c\u72b6\u6001\u663e\u793a\u6216\u9690\u85cf",Object(j.b)("inlineCode",{parentName:"li"},"\u4fdd\u5b58\u3001\u53d6\u6d88"),"\u6309\u94ae"),Object(j.b)("li",{parentName:"ul"},"\u8bf7\u6c42\u65f6\uff0c\u663e\u793a\u4fdd\u5b58\u6309\u94ae\u52a8\u753b\uff0c\u7981\u7528\u53d6\u6d88"),Object(j.b)("li",{parentName:"ul"},"\u9605\u8bfb\u72b6\u6001\u4e0b\uff0c\u7ed9\u8868\u5355\u5143\u7d20\u52a0\u4e0adisbled\u5c5e\u6027"),Object(j.b)("li",{parentName:"ul"},"\u501f\u52a9FormUtil\u8fdb\u884c\u4e86\u5143\u7d20\u5bf9\u9f50")),Object(j.b)("h2",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),Object(j.b)("h3",{id:"\u65b0\u589e"},"\u65b0\u589e"),Object(j.b)("p",null,Object(j.b)("inlineCode",{parentName:"p"},"source"),"\u4e3a\u7a7a\u65f6\uff0c\u4e3a\u65b0\u589e\u72b6\u6001"),Object(j.b)(O.c,{__position:0,__code:"<EditForm\n  formItemList={[\n    {\n      name: 'nickName',\n      label: '\u59d3\u540d',\n      content: <Input />,\n      rules: [\n        {\n          required: true,\n          message: '\u8bf7\u586b\u5199\u59d3\u540d',\n        },\n      ],\n    },\n    {\n      name: 'age',\n      label: '\u5e74\u9f84',\n      content: <InputNumber />,\n    },\n  ]}\n  addFunction={value => {\n    Modal.confirm({\n      title: '\u65b0\u589e',\n      content: JSON.stringify(value),\n    })\n    return fetch('./add')\n  }}\n/>",__scope:{props:this?this.props:t,Playground:O.c,Props:O.d,Form:b.a,InputNumber:m.a,Input:c.a,Radio:u.default,Modal:l.a,Button:r.a,message:d.a,EditForm:F.a},__codesandbox:"undefined",mdxType:"Playground"},Object(j.b)(F.a,{formItemList:[{name:"nickName",label:"\u59d3\u540d",content:Object(j.b)(c.a,{mdxType:"Input"}),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]},{name:"age",label:"\u5e74\u9f84",content:Object(j.b)(m.a,{mdxType:"InputNumber"})}],addFunction:function(e){return l.a.confirm({title:"\u65b0\u589e",content:JSON.stringify(e)}),fetch("./add")},mdxType:"EditForm"})),Object(j.b)("h3",{id:"\u7f16\u8f91"},"\u7f16\u8f91"),Object(j.b)("p",null,Object(j.b)("inlineCode",{parentName:"p"},"source"),"\u3001",Object(j.b)("inlineCode",{parentName:"p"},"updateFunction")," \u4e0d\u4e3a\u7a7a\u65f6\uff0c\u7f16\u8f91\u72b6\u6001"),Object(j.b)(O.c,{__position:1,__code:"<EditForm\n  formItemList={[\n    {\n      name: 'nickName',\n      label: '\u59d3\u540d',\n      content: <Input />,\n      rules: [\n        {\n          required: true,\n          message: '\u8bf7\u586b\u5199\u59d3\u540d',\n        },\n      ],\n    },\n  ]}\n  source={{\n    id: 1,\n    nickName: 'aa',\n  }}\n  updateFunction={(value, source) => {\n    Modal.confirm({\n      title: '\u7f16\u8f91',\n      content: `\u65b0\u6570\u636e\uff1a${JSON.stringify(value)}\u3002 \u539f\u6570\u636e\uff1a${JSON.stringify(\n        source,\n      )}`,\n    })\n    return fetch('./')\n  }}\n/>",__scope:{props:this?this.props:t,Playground:O.c,Props:O.d,Form:b.a,InputNumber:m.a,Input:c.a,Radio:u.default,Modal:l.a,Button:r.a,message:d.a,EditForm:F.a},__codesandbox:"undefined",mdxType:"Playground"},Object(j.b)(F.a,{formItemList:[{name:"nickName",label:"\u59d3\u540d",content:Object(j.b)(c.a,{mdxType:"Input"}),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]}],source:{id:1,nickName:"aa"},updateFunction:function(e,n){return l.a.confirm({title:"\u7f16\u8f91",content:"\u65b0\u6570\u636e\uff1a".concat(JSON.stringify(e),"\u3002 \u539f\u6570\u636e\uff1a").concat(JSON.stringify(n))}),fetch("./")},mdxType:"EditForm"})),Object(j.b)("h3",{id:"\u9605\u8bfb"},"\u9605\u8bfb"),Object(j.b)("p",null,Object(j.b)("inlineCode",{parentName:"p"},"source"),"\u4e0d\u4e3a\u7a7a\uff0c",Object(j.b)("inlineCode",{parentName:"p"},"updateFunction")," \u4e3a\u7a7a\uff0c\u9605\u8bfb\u72b6\u6001\u3002"),Object(j.b)("p",null,"\u9605\u8bfb\u72b6\u6001\u4e0b\uff0c\u4f1a\u81ea\u52a8\u7ed9\u7ec4\u4ef6\u52a0\u4e0adisabled=true\uff0c\u8bf7\u786e\u8ba4\u8868\u5355\u7ec4\u4ef6\u652f\u6301disabled\u5c5e\u6027\uff0c\u6216\u7ec4\u4ef6\u672c\u8eab\u5df2\u4e0d\u53ef\u7f16\u8f91"),Object(j.b)(O.c,{__position:2,__code:"<EditForm\n  formItemList={[\n    {\n      name: 'nickName',\n      label: '\u59d3\u540d',\n      content: <Input />,\n      rules: [\n        {\n          required: true,\n          message: '\u8bf7\u586b\u5199\u59d3\u540d',\n        },\n      ],\n    },\n  ]}\n  source={{\n    id: 1,\n    nickName: 'aa',\n  }}\n/>",__scope:{props:this?this.props:t,Playground:O.c,Props:O.d,Form:b.a,InputNumber:m.a,Input:c.a,Radio:u.default,Modal:l.a,Button:r.a,message:d.a,EditForm:F.a},__codesandbox:"undefined",mdxType:"Playground"},Object(j.b)(F.a,{formItemList:[{name:"nickName",label:"\u59d3\u540d",content:Object(j.b)(c.a,{mdxType:"Input"}),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]}],source:{id:1,nickName:"aa"},mdxType:"EditForm"})),Object(j.b)("h3",{id:"\u4ece\u540e\u7aef\u83b7\u53d6\u5b8c\u6574\u6570\u636e"},"\u4ece\u540e\u7aef\u83b7\u53d6\u5b8c\u6574\u6570\u636e"),Object(j.b)("p",null,"\u4f7f\u7528",Object(j.b)("inlineCode",{parentName:"p"},"getDetailFunction"),"\u83b7\u53d6\u5b8c\u6574\u6570\u636e"),Object(j.b)(O.c,{__position:3,__code:"<EditForm\n  formItemList={[\n    {\n      name: 'nickName',\n      label: '\u59d3\u540d',\n      content: <Input />,\n      rules: [\n        {\n          required: true,\n          message: '\u8bf7\u586b\u5199\u59d3\u540d',\n        },\n      ],\n    },\n    {\n      label: '\u5e74\u9f84',\n      name: 'age',\n      content: <InputNumber />,\n    },\n    {\n      label: '\u624b\u673a\u53f7',\n      name: 'phone',\n      content: <Input />,\n    },\n  ]}\n  getDetailFunction={() => {\n    return {\n      id: 1,\n      nickName: 'aa',\n      age: 5,\n      phone: '18611111111',\n    }\n  }}\n  source={{\n    id: 1,\n    nickName: 'aa',\n  }}\n/>",__scope:{props:this?this.props:t,Playground:O.c,Props:O.d,Form:b.a,InputNumber:m.a,Input:c.a,Radio:u.default,Modal:l.a,Button:r.a,message:d.a,EditForm:F.a},__codesandbox:"undefined",mdxType:"Playground"},Object(j.b)(F.a,{formItemList:[{name:"nickName",label:"\u59d3\u540d",content:Object(j.b)(c.a,{mdxType:"Input"}),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]},{label:"\u5e74\u9f84",name:"age",content:Object(j.b)(m.a,{mdxType:"InputNumber"})},{label:"\u624b\u673a\u53f7",name:"phone",content:Object(j.b)(c.a,{mdxType:"Input"})}],getDetailFunction:function(){return{id:1,nickName:"aa",age:5,phone:"18611111111"}},source:{id:1,nickName:"aa"},mdxType:"EditForm"})),Object(j.b)("h3",{id:"\u4e00\u884c\u8bbe\u7f6e\u591a\u5217"},"\u4e00\u884c\u8bbe\u7f6e\u591a\u5217"),Object(j.b)("p",null,Object(j.b)("inlineCode",{parentName:"p"},"columnsCount={2}")),Object(j.b)(O.c,{__position:4,__code:"<EditForm\n  columnsCount={2}\n  formItemList={[\n    {\n      name: 'nickName',\n      label: '\u59d3\u540d',\n      content: <Input />,\n      rules: [\n        {\n          required: true,\n          message: '\u8bf7\u586b\u5199\u59d3\u540d',\n        },\n      ],\n    },\n    {\n      name: 'age',\n      label: '\u5e74\u9f84',\n      content: <InputNumber />,\n    },\n  ]}\n  addFunction={value => {\n    Modal.confirm({\n      title: '\u65b0\u589e',\n      content: JSON.stringify(value),\n    })\n    return fetch('./')\n  }}\n/>",__scope:{props:this?this.props:t,Playground:O.c,Props:O.d,Form:b.a,InputNumber:m.a,Input:c.a,Radio:u.default,Modal:l.a,Button:r.a,message:d.a,EditForm:F.a},__codesandbox:"undefined",mdxType:"Playground"},Object(j.b)(F.a,{columnsCount:2,formItemList:[{name:"nickName",label:"\u59d3\u540d",content:Object(j.b)(c.a,{mdxType:"Input"}),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]},{name:"age",label:"\u5e74\u9f84",content:Object(j.b)(m.a,{mdxType:"InputNumber"})}],addFunction:function(e){return l.a.confirm({title:"\u65b0\u589e",content:JSON.stringify(e)}),fetch("./")},mdxType:"EditForm"})),Object(j.b)("h3",{id:"\u7ed3\u5408\u5f39\u7a97"},"\u7ed3\u5408\u5f39\u7a97"),Object(j.b)("p",null,"\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u6e90\u6570\u636e\uff0c\u5bf9\u4e8e\u6e90\u6570\u636e\uff0c\u4f7f\u7528\u5f39\u7a97\u7684\u65b9\u5f0f\u8fdb\u884c\u65b0\u589e\u3001\u4fee\u6539\u3001\u67e5\u770b\u3002"),Object(j.b)("ul",null,Object(j.b)("li",{parentName:"ul"},"\u65b0\u589e\u65f6\uff0c\u8868\u5355\u7ec4\u4ef6\u65e0\u9ed8\u8ba4\u6570\u636e"),Object(j.b)("li",{parentName:"ul"},"\u7f16\u8f91\u65f6\uff0c\u8868\u5355\u7ec4\u4ef6\u6709\u9ed8\u8ba4\u6570\u636e")),Object(j.b)("p",null,"\u6b64\u793a\u4f8b\u5c55\u793a\u4e86EditForm\u5982\u4f55\u7ed3\u5408\u5f39\u7a97\u4f7f\u7528\uff0c\u7ec4\u4ef6\u5e93\u63d0\u4f9b\u4e86\u4e00\u4e2a\u73b0\u6210\u7684\u7ec4\u4ef6",Object(j.b)("inlineCode",{parentName:"p"},"EditModal"),"\u3002\n\u5982\u9700\u66f4\u590d\u6742\u7684\u5f39\u7a97\u529f\u80fd\uff0c\u5efa\u8bae\u5728\u9879\u76ee\u4e2d\u81ea\u5b9a\u4e49\u4e00\u4e2a\u7c7b\u4f3cEditModal\u7684\u7ec4\u4ef6\uff0c\u5728\u9879\u76ee\u5404\u6a21\u5757\u4f7f\u7528\u3002"),Object(j.b)(O.c,{__position:5,__code:"class Demo extends React.Component {\n    constructor(props) {\n      super(props)\n      this.formItemList = [\n        {\n          name: 'nickName',\n          label: '\u59d3\u540d',\n          content: <Input />,\n          rules: [\n            {\n              required: true,\n              message: '\u8bf7\u586b\u5199\u59d3\u540d',\n            },\n          ],\n        },\n        {\n          name: 'age',\n          label: '\u5e74\u9f84',\n          content: <InputNumber />,\n        },\n      ]\n      this.state = {\n        visibleModal: false,\n        source: {\n          id: 1,\n          nickName: 'aaaa',\n          age: 45,\n        },\n        editSource: null,\n        addFunction: null,\n        updateFunction: null,\n      }\n    }\n    addFunction(value) {\n      Modal.confirm({\n        title: '\u65b0\u589e',\n        content: JSON.stringify(value),\n      })\n      return fetch('./add')\n    }\n\n    updateFunction(value) {\n      Modal.confirm({\n        title: '\u65b0\u589e',\n        content: JSON.stringify(value),\n      })\n      return fetch('./update')\n    }\n\n    closeEdit() {\n      this.setState({ visibleModal: false })\n    }\n\n    render() {\n      const {\n        visibleModal,\n        editSource,\n        updateFunction,\n        addFunction,\n        source,\n      } = this.state\n      return (\n        <div>\n          <div>\n            <Button\n              style={{ marginRight: 10 }}\n              onClick={() => {\n                this.setState({\n                  visibleModal: true,\n                  addFunction: this.addFunction,\n                  updateFunction: this.updateFunction,\n                  editSource: null,\n                })\n              }}\n            >\n              \u65b0\u589e\n            </Button>\n            <Button\n              style={{ marginRight: 10 }}\n              onClick={() => {\n                this.setState({\n                  visibleModal: true,\n                  addFunction: this.addFunction,\n                  updateFunction: this.updateFunction,\n                  editSource: source,\n                })\n              }}\n            >\n              \u7f16\u8f91\n            </Button>\n            <Button\n              onClick={() => {\n                this.setState({\n                  visibleModal: true,\n                  addFunction: this.addFunction,\n                  updateFunction: null,\n                  editSource: source,\n                })\n              }}\n            >\n              \u67e5\u770b\n            </Button>\n          </div>\n          <Modal\n            visible={visibleModal}\n            footer={null}\n            title={editSource ? editSource.nickName : '\u65b0\u589e'}\n            onCancel={this.closeEdit.bind(this)}\n            destroyOnClose\n          >\n            <EditForm\n              onCancel={this.closeEdit.bind(this)}\n              formItemList={this.formItemList}\n              addFunction={addFunction}\n              updateFunction={updateFunction}\n              source={editSource}\n              onOk={() => {\n                this.closeEdit()\n              }}\n            />\n          </Modal>\n        </div>\n      )\n    }\n  }",__scope:{props:this?this.props:t,Playground:O.c,Props:O.d,Form:b.a,InputNumber:m.a,Input:c.a,Radio:u.default,Modal:l.a,Button:r.a,message:d.a,EditForm:F.a},__codesandbox:"undefined",mdxType:"Playground"},function(e){Object(s.a)(t,e);var n=Object(i.a)(t);function t(e){var o;return Object(a.a)(this,t),(o=n.call(this,e)).formItemList=[{name:"nickName",label:"\u59d3\u540d",content:Object(j.b)(c.a,{mdxType:"Input"}),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]},{name:"age",label:"\u5e74\u9f84",content:Object(j.b)(m.a,{mdxType:"InputNumber"})}],o.state={visibleModal:!1,source:{id:1,nickName:"aaaa",age:45},editSource:null,addFunction:null,updateFunction:null},o}return Object(o.a)(t,[{key:"addFunction",value:function(e){return l.a.confirm({title:"\u65b0\u589e",content:JSON.stringify(e)}),fetch("./add")}},{key:"updateFunction",value:function(e){return l.a.confirm({title:"\u65b0\u589e",content:JSON.stringify(e)}),fetch("./update")}},{key:"closeEdit",value:function(){this.setState({visibleModal:!1})}},{key:"render",value:function(){var e=this,n=this.state,t=n.visibleModal,a=n.editSource,o=n.updateFunction,i=n.addFunction,s=n.source;return Object(j.b)("div",null,Object(j.b)("div",null,Object(j.b)(r.a,{style:{marginRight:10},onClick:function(){e.setState({visibleModal:!0,addFunction:e.addFunction,updateFunction:e.updateFunction,editSource:null})},mdxType:"Button"},"\u65b0\u589e"),Object(j.b)(r.a,{style:{marginRight:10},onClick:function(){e.setState({visibleModal:!0,addFunction:e.addFunction,updateFunction:e.updateFunction,editSource:s})},mdxType:"Button"},"\u7f16\u8f91"),Object(j.b)(r.a,{onClick:function(){e.setState({visibleModal:!0,addFunction:e.addFunction,updateFunction:null,editSource:s})},mdxType:"Button"},"\u67e5\u770b")),Object(j.b)(l.a,{visible:t,footer:null,title:a?a.nickName:"\u65b0\u589e",onCancel:this.closeEdit.bind(this),destroyOnClose:!0,mdxType:"Modal"},Object(j.b)(F.a,{onCancel:this.closeEdit.bind(this),formItemList:this.formItemList,addFunction:i,updateFunction:o,source:a,onOk:function(){e.closeEdit()},mdxType:"EditForm"})))}}]),t}(h.a.Component)),Object(j.b)("h3",{id:"\u5904\u7406\u4fdd\u5b58\u6210\u529f\u3001\u5931\u8d25"},"\u5904\u7406\u4fdd\u5b58\u6210\u529f\u3001\u5931\u8d25"),Object(j.b)("p",null,Object(j.b)("inlineCode",{parentName:"p"},"onOk"),"--\u4fdd\u5b58\u6210\u529f\n",Object(j.b)("inlineCode",{parentName:"p"},"onError"),"--\u4fdd\u5b58\u5931\u8d25"),Object(j.b)("p",null,"\u6253\u5f00\u7a97\u53e3\uff0c\u70b9\u51fb\u4fdd\u5b58\uff0c\u4f1a\u968f\u673a\u8fdb\u5165\u6210\u529f\u6216\u5931\u8d25"),Object(j.b)(O.c,{__position:6,__code:"class Demo extends React.Component {\n    constructor(props) {\n      super(props)\n      this.formItemList = [\n        {\n          name: 'nickName',\n          label: '\u59d3\u540d',\n          content: <Input />,\n          rules: [\n            {\n              required: true,\n              message: '\u8bf7\u586b\u5199\u59d3\u540d',\n            },\n          ],\n        },\n        {\n          name: 'age',\n          label: '\u5e74\u9f84',\n          content: <InputNumber />,\n        },\n      ]\n      this.state = {\n        visibleModal: false,\n        source: {\n          id: 1,\n          nickName: 'aaaa',\n          age: 45,\n        },\n        editSource: null,\n        addFunction: null,\n        updateFunction: null,\n      }\n    }\n    addFunction(value) {\n      Modal.confirm({\n        title: '\u65b0\u589e',\n        content: JSON.stringify(value),\n      })\n\n      return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          fetch('./add')\n\n          if (Math.random() > 0.5) {\n            resolve()\n          } else {\n            reject('\u8fd9\u91cc\u662f\u670d\u52a1\u5668\u8fd4\u56de\u7684\u9519\u8bef\u539f\u56e0')\n          }\n        }, 1000)\n      })\n    }\n\n    closeEdit() {\n      this.setState({ visibleModal: false })\n    }\n\n    render() {\n      const { visibleModal, addFunction } = this.state\n      return (\n        <div>\n          <Button\n            onClick={() => {\n              this.setState({\n                visibleModal: true,\n                addFunction: this.addFunction,\n              })\n            }}\n          >\n            \u65b0\u589e\n          </Button>\n          <Modal\n            visible={visibleModal}\n            footer={null}\n            title=\"\u65b0\u589e\"\n            onCancel={this.closeEdit.bind(this)}\n            destroyOnClose\n          >\n            <EditForm\n              onCancel={this.closeEdit.bind(this)}\n              onOk={() => {\n                message.success('\u4fdd\u5b58\u6210\u529f')\n                this.closeEdit()\n              }}\n              onError={error => {\n                message.error('\u4fdd\u5b58\u5931\u8d25\uff1a' + error)\n              }}\n              formItemList={this.formItemList}\n              addFunction={addFunction}\n            />\n          </Modal>\n        </div>\n      )\n    }\n  }",__scope:{props:this?this.props:t,Playground:O.c,Props:O.d,Form:b.a,InputNumber:m.a,Input:c.a,Radio:u.default,Modal:l.a,Button:r.a,message:d.a,EditForm:F.a},__codesandbox:"undefined",mdxType:"Playground"},function(e){Object(s.a)(t,e);var n=Object(i.a)(t);function t(e){var o;return Object(a.a)(this,t),(o=n.call(this,e)).formItemList=[{name:"nickName",label:"\u59d3\u540d",content:Object(j.b)(c.a,{mdxType:"Input"}),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]},{name:"age",label:"\u5e74\u9f84",content:Object(j.b)(m.a,{mdxType:"InputNumber"})}],o.state={visibleModal:!1,source:{id:1,nickName:"aaaa",age:45},editSource:null,addFunction:null,updateFunction:null},o}return Object(o.a)(t,[{key:"addFunction",value:function(e){return l.a.confirm({title:"\u65b0\u589e",content:JSON.stringify(e)}),new Promise((function(e,n){setTimeout((function(){fetch("./add"),Math.random()>.5?e():n("\u8fd9\u91cc\u662f\u670d\u52a1\u5668\u8fd4\u56de\u7684\u9519\u8bef\u539f\u56e0")}),1e3)}))}},{key:"closeEdit",value:function(){this.setState({visibleModal:!1})}},{key:"render",value:function(){var e=this,n=this.state,t=n.visibleModal,a=n.addFunction;return Object(j.b)("div",null,Object(j.b)(r.a,{onClick:function(){e.setState({visibleModal:!0,addFunction:e.addFunction})},mdxType:"Button"},"\u65b0\u589e"),Object(j.b)(l.a,{visible:t,footer:null,title:"\u65b0\u589e",onCancel:this.closeEdit.bind(this),destroyOnClose:!0,mdxType:"Modal"},Object(j.b)(F.a,{onCancel:this.closeEdit.bind(this),onOk:function(){d.a.success("\u4fdd\u5b58\u6210\u529f"),e.closeEdit()},onError:function(e){d.a.error("\u4fdd\u5b58\u5931\u8d25\uff1a"+e)},formItemList:this.formItemList,addFunction:a,mdxType:"EditForm"})))}}]),t}(h.a.Component)),Object(j.b)("h2",{id:"\u5c5e\u6027"},"\u5c5e\u6027"),Object(j.b)(O.d,{of:F.a,mdxType:"Props"}))}_&&_===Object(_)&&Object.isExtensible(_)&&Object.defineProperty(_,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/editForm/EditForm.mdx"}}),_.isMDXComponent=!0},"./src/editForm/EditForm.tsx":function(e,n,t){"use strict";t("./node_modules/antd/es/button/style/index.js");var a=t("./node_modules/antd/es/button/index.js"),o=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),i=t.n(o),s=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),d=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),l=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),u=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),c=t("./node_modules/antd/lib/form/Form.js"),m=t.n(c),b=t("./node_modules/lodash/lodash.js"),p=t.n(b),f=t("react"),h=t.n(f),j=t("./src/utils/FormUtil.tsx");t("./src/editForm/EditForm.less");"undefined"!==typeof IEditFormProps&&IEditFormProps&&IEditFormProps===Object(IEditFormProps)&&Object.isExtensible(IEditFormProps)&&Object.defineProperty(IEditFormProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IEditFormProps",filename:"src/editForm/EditForm.tsx"}});var O=function(e){Object(u.a)(o,e);var n,t=Object(l.a)(o);function o(e){var n;return Object(d.a)(this,o),(n=t.call(this,e)).state={loading:!1},n}return Object(r.a)(o,[{key:"componentDidMount",value:function(){this.updateStateSource()}},{key:"componentDidUpdate",value:function(e){p.a.isEqual(this.props.source,e.source)||this.updateStateSource()}},{key:"updateStateSource",value:(n=Object(s.a)(i.a.mark((function e(){var n,t,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,t=n.source,a=n.getDetailFunction,this.state.source,t){e.next=6;break}this.setState({source:void 0}),e.next=14;break;case 6:if(!a){e.next=13;break}return e.next=9,a(t);case 9:o=e.sent,this.setState({source:o}),e.next=14;break;case 13:this.setState({source:t});case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"save",value:function(e){var n=this,t=this.props,a=t.addFunction,o=t.updateFunction,i=t.onOk,s=t.onError,d=this.state.source,r=null;d?o&&(r=o(e,d)):a&&(r=a(e)),r&&(this.setState({loading:!0}),r.then((function(){n.setState({loading:!1}),i&&i()})).catch((function(e){n.setState({loading:!1}),s&&s(e)})))}},{key:"getControlList",value:function(){var e=this.state.loading,n=this.props.onCancel;return this.readOnly?[]:[{span:24,content:h.a.createElement("div",{className:"fhControlGroup"},h.a.createElement(a.a,{type:"primary",loading:e,htmlType:"submit"},"\u4fdd\u5b58"),h.a.createElement(a.a,{disabled:e,onClick:function(){n&&n()}},"\u53d6\u6d88"))}]}},{key:"render",value:function(){var e=this,n=this.props,t=n.formItemList,a=n.columnsCount,o=void 0===a?1:a,i=n.key,s=void 0===i?"id":i,d=n.className,r=n.style,l=this.state.source,u=this.getControlList();return this.readOnly&&t.forEach((function(e){e.content&&h.a.isValidElement(e.content)&&(e.content=h.a.cloneElement(e.content,{disabled:!0}))})),h.a.createElement("div",{className:"fhEditForm"},h.a.createElement(m.a,{className:d,style:r,key:l?l[s]:"",initialValues:l,onFinish:function(n){e.save(n)}},j.a.renderFormItems(t.concat(u),o)))}},{key:"readOnly",get:function(){var e=this.props,n=e.source,t=e.updateFunction;return n&&!t}}]),o}(f.Component);n.a=O,"undefined"!==typeof O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditForm",filename:"src/editForm/EditForm.tsx"}})},"./src/utils/FormUtil.tsx":function(e,n,t){"use strict";t("./node_modules/antd/es/row/style/index.js");var a=t("./node_modules/antd/es/row/index.js"),o=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),i=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),d=t("./node_modules/antd/lib/col/index.js"),r=t.n(d),l=t("./node_modules/antd/lib/form/FormItem.js"),u=t.n(l),c=t("react"),m=t.n(c),b=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"renderFormItems",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(!e||!e.length)return null;for(var i=24/n,s=[],d=0;d<e.length;d++){var l=e[d],c=l.span;c||(c=l.label&&l.label.length>6?24:i),c=Math.min(24,c);var b=Math.min(24,l.labelSpan?l.labelSpan:Math.round(t*i/c)),p={};l.label?(p.labelCol={span:b},p.wrapperCol={span:24-b}):p.wrapperCol={offset:b};var f=null;if(l.content){var h=Object.assign(Object(o.a)({label:l.label,name:l.name,rules:l.rules,valuePropName:l.valuePropName||"value"},p,{},l.formItemProps,{children:null}));f=l.contentIsFormItem?m.a.cloneElement(l.content,Object.assign(h,l.content.props)):m.a.createElement(u.a,h,l.content)}var j={span:c,formItem:f},O=void 0;s.length&&(O=s[s.length-1]),(!O||O.totalSpan+c>24)&&(O={totalSpan:0,cols:[]},s.push(O)),O.totalSpan+=c,O.cols.push(j)}return s.map((function(e,n){return m.a.createElement(a.a,{key:n},e.cols.map((function(e,n){return m.a.createElement(r.a,{key:n,span:e.span},e.formItem)})))}))}},{key:"renderInlinFormItems",value:function(e){return e&&e.length?e.map((function(e,n){return m.a.createElement(u.a,Object.assign({key:n,label:e.label,name:e.name,rules:e.rules},e.formItemProps),e.content)})):null}}]),e}();n.a=b,"undefined"!==typeof b&&b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"FormUtil",filename:"src/utils/FormUtil.tsx"}})}}]);