(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"./src/editForm/EditForm.less":function(e,t,n){},"./src/editForm/EditForm.tsx":function(e,t,n){"use strict";n("./node_modules/antd/es/button/style/index.js");var s=n("./node_modules/antd/es/button/index.js"),a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),o=n.n(a),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),l=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),d=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),u=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/antd/lib/form/Form.js"),m=n.n(c),p=n("./node_modules/lodash/lodash.js"),b=n.n(p),f=n("react"),h=n.n(f),j=n("./src/utils/FormUtil.tsx");n("./src/editForm/EditForm.less");"undefined"!==typeof IEditFormProps&&IEditFormProps&&IEditFormProps===Object(IEditFormProps)&&Object.isExtensible(IEditFormProps)&&Object.defineProperty(IEditFormProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IEditFormProps",filename:"src/editForm/EditForm.tsx"}});var v=function(e){Object(u.a)(a,e);var t,n=Object(d.a)(a);function a(e){var t;return Object(l.a)(this,a),(t=n.call(this,e)).state={loading:!1},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.updateStateSource()}},{key:"componentDidUpdate",value:function(e){b.a.isEqual(this.props.source,e.source)||this.updateStateSource()}},{key:"updateStateSource",value:(t=Object(r.a)(o.a.mark((function e(){var t,n,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.source,s=t.getDetailFunction,this.state.source,n){e.next=6;break}this.setState({source:void 0}),e.next=14;break;case 6:if(!s){e.next=13;break}return e.next=9,s(n);case 9:a=e.sent,this.setState({source:a}),e.next=14;break;case 13:this.setState({source:n});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"save",value:function(e){var t=this,n=this.props,s=n.addFunction,a=n.updateFunction,o=n.onOk,r=n.onError,l=this.state.source,i=null;l?a&&(i=a(e,l)):s&&(i=s(e)),i&&(this.setState({loading:!0}),i.then((function(){t.setState({loading:!1}),o&&o()})).catch((function(e){t.setState({loading:!1}),r&&r(e)})))}},{key:"getControlList",value:function(){var e=this.state.loading,t=this.props.onCancel;return this.readOnly?[]:[{span:24,content:h.a.createElement("div",{className:"fhControlGroup"},h.a.createElement(s.a,{type:"primary",loading:e,htmlType:"submit"},"\u4fdd\u5b58"),h.a.createElement(s.a,{disabled:e,onClick:function(){t&&t()}},"\u53d6\u6d88"))}]}},{key:"render",value:function(){var e=this,t=this.props,n=t.formItemList,s=t.columnsCount,a=void 0===s?1:s,o=t.key,r=void 0===o?"id":o,l=t.className,i=t.style,d=this.state.source,u=this.getControlList();return this.readOnly&&n.forEach((function(e){e.content&&h.a.isValidElement(e.content)&&(e.content=h.a.cloneElement(e.content,{disabled:!0}))})),h.a.createElement("div",{className:"fhEditForm"},h.a.createElement(m.a,{className:l,style:i,key:d?d[r]:"",initialValues:d,onFinish:function(t){e.save(t)}},j.a.renderFormItems(n.concat(u),a)))}},{key:"readOnly",get:function(){var e=this.props,t=e.source,n=e.updateFunction;return t&&!n}}]),a}(f.Component);t.a=v,"undefined"!==typeof v&&v&&v===Object(v)&&Object.isExtensible(v)&&Object.defineProperty(v,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditForm",filename:"src/editForm/EditForm.tsx"}})},"./src/editModal/EditModal.mdx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));var s=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),o=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),l=(n("./node_modules/antd/es/message/style/index.js"),n("./node_modules/antd/es/message/index.js")),i=(n("./node_modules/antd/es/button/style/index.js"),n("./node_modules/antd/es/button/index.js")),d=(n("./node_modules/antd/es/modal/style/index.js"),n("./node_modules/antd/es/modal/index.js")),u=(n("./node_modules/antd/es/radio/style/index.js"),n("./node_modules/antd/es/radio/index.js")),c=(n("./node_modules/antd/es/input/style/index.js"),n("./node_modules/antd/es/input/index.js")),m=(n("./node_modules/antd/es/input-number/style/index.js"),n("./node_modules/antd/es/input-number/index.js")),p=(n("./node_modules/antd/es/form/style/index.js"),n("./node_modules/antd/es/form/index.js")),b=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),f=n("react"),h=n.n(f),j=n("./node_modules/@mdx-js/react/dist/esm.js"),v=n("./node_modules/father/node_modules/docz/dist/index.esm.js"),y=(n("./node_modules/antd/dist/antd.css"),n("./src/editForm/EditForm.tsx")),O=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).close=function(){var t=e.props.close;t&&t()},e}return Object(a.a)(n,[{key:"renderTitle",value:function(){var e=this.props,t=e.editFormProps,n=e.renderTitle;if(n)return n();var s=t.source,a=t.updateFunction;return s?a?"\u7f16\u8f91":"\u67e5\u770b":"\u65b0\u589e"}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,s=t.editFormProps,a=t.modalProps,o=t.className,r=t.style,l=s.onOk;return h.a.createElement(d.a,Object.assign({className:o,style:r},a,{title:this.renderTitle(),destroyOnClose:!0,visible:n,footer:null,onCancel:this.close}),h.a.createElement(y.a,Object.assign({onCancel:this.close},s,{onOk:function(){e.close(),l&&l()}})))}}]),n}(f.Component),_=O;"undefined"!==typeof O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditModal",filename:"src/editModal/EditModal.tsx"}});var F={};function x(e){var t=e.components,n=Object(b.a)(e,["components"]);return Object(j.b)("wrapper",Object.assign({},F,n,{components:t,mdxType:"MDXLayout"}),Object(j.b)("h1",{id:"editmodal"},"EditModal"),Object(j.b)("p",null,"EditModal\u662fEditForm\u7ed3\u5408\u5f39\u7a97\u4f7f\u7528\u7684\u5c01\u88c5\u3002"),Object(j.b)("p",null,"EditModal\u4e3a\u4f60\u5904\u7406\u4e86"),Object(j.b)("ul",null,Object(j.b)("li",{parentName:"ul"},"\u7a97\u53e3\u6807\u9898"),Object(j.b)("li",{parentName:"ul"},"\u7a97\u53e3\u663e\u793a\u9690\u85cf\u7684\u63a7\u5236")),Object(j.b)("h2",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),Object(j.b)("h3",{id:"\u9ed8\u8ba4"},"\u9ed8\u8ba4"),Object(j.b)("p",null,"\u8868\u5355\u7684\u8be6\u7ec6\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003",Object(j.b)("inlineCode",{parentName:"p"},"EditForm")),Object(j.b)(v.c,{__position:0,__code:"class Demo extends React.Component {\n    constructor(props) {\n      super(props)\n      this.state = {\n        visible: false,\n        source: null,\n        updateFunction: null,\n      }\n    }\n    addFunction(value) {\n      Modal.confirm({\n        title: '\u65b0\u589e',\n        content: JSON.stringify(value),\n      })\n      return fetch('./add')\n    }\n\n    updateFunction(value) {\n      Modal.confirm({\n        title: '\u7f16\u8f91',\n        content: JSON.stringify(value),\n      })\n      return fetch('./update')\n    }\n\n    render() {\n      const { visible, source, updateFunction } = this.state\n      return (\n        <div>\n          <Button\n            style={{ marginRight: 10 }}\n            onClick={() => {\n              this.setState({\n                visible: true,\n                source: null,\n                updateFunction: null,\n              })\n            }}\n          >\n            \u65b0\u589e\n          </Button>\n          <Button\n            style={{ marginRight: 10 }}\n            onClick={() => {\n              this.setState({\n                visible: true,\n                source: { id: 1, nickName: 'aa' },\n                updateFunction: this.updateFunction,\n              })\n            }}\n          >\n            \u7f16\u8f91\n          </Button>\n          <Button\n            onClick={() => {\n              null\n              this.setState({\n                visible: true,\n                source: { id: 1, nickName: 'aa' },\n                updateFunction: null,\n              })\n            }}\n          >\n            \u67e5\u770b\n          </Button>\n          <EditModal\n            editFormProps={{\n              source,\n              addFunction: this.addFunction,\n              updateFunction,\n              formItemList: [\n                {\n                  name: 'nickName',\n                  label: '\u59d3\u540d',\n                  content: <Input />,\n                  rules: [\n                    {\n                      required: true,\n                      message: '\u8bf7\u586b\u5199\u59d3\u540d',\n                    },\n                  ],\n                },\n                {\n                  name: 'age',\n                  label: '\u5e74\u9f84',\n                  content: <InputNumber />,\n                },\n              ],\n              onOk: () => {\n                message.success('\u4fdd\u5b58\u6210\u529f')\n              },\n            }}\n            visible={visible}\n            close={() => this.setState({ visible: false })}\n          />\n        </div>\n      )\n    }\n  }",__scope:{props:this?this.props:n,Playground:v.c,Props:v.d,Form:p.a,InputNumber:m.a,Input:c.a,Radio:u.default,Modal:d.a,Button:i.a,message:l.a,EditModal:_},__codesandbox:"undefined",mdxType:"Playground"},function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={visible:!1,source:null,updateFunction:null},a}return Object(a.a)(n,[{key:"addFunction",value:function(e){return d.a.confirm({title:"\u65b0\u589e",content:JSON.stringify(e)}),fetch("./add")}},{key:"updateFunction",value:function(e){return d.a.confirm({title:"\u7f16\u8f91",content:JSON.stringify(e)}),fetch("./update")}},{key:"render",value:function(){var e=this,t=this.state,n=t.visible,s=t.source,a=t.updateFunction;return Object(j.b)("div",null,Object(j.b)(i.a,{style:{marginRight:10},onClick:function(){e.setState({visible:!0,source:null,updateFunction:null})},mdxType:"Button"},"\u65b0\u589e"),Object(j.b)(i.a,{style:{marginRight:10},onClick:function(){e.setState({visible:!0,source:{id:1,nickName:"aa"},updateFunction:e.updateFunction})},mdxType:"Button"},"\u7f16\u8f91"),Object(j.b)(i.a,{onClick:function(){e.setState({visible:!0,source:{id:1,nickName:"aa"},updateFunction:null})},mdxType:"Button"},"\u67e5\u770b"),Object(j.b)(_,{editFormProps:{source:s,addFunction:this.addFunction,updateFunction:a,formItemList:[{name:"nickName",label:"\u59d3\u540d",content:Object(j.b)(c.a,{mdxType:"Input"}),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]},{name:"age",label:"\u5e74\u9f84",content:Object(j.b)(m.a,{mdxType:"InputNumber"})}],onOk:function(){l.a.success("\u4fdd\u5b58\u6210\u529f")}},visible:n,close:function(){return e.setState({visible:!1})},mdxType:"EditModal"}))}}]),n}(h.a.Component)),Object(j.b)("h2",{id:"\u5c5e\u6027"},"\u5c5e\u6027"),Object(j.b)(v.d,{of:_,mdxType:"Props"}))}x&&x===Object(x)&&Object.isExtensible(x)&&Object.defineProperty(x,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/editModal/EditModal.mdx"}}),x.isMDXComponent=!0},"./src/utils/FormUtil.tsx":function(e,t,n){"use strict";n("./node_modules/antd/es/row/style/index.js");var s=n("./node_modules/antd/es/row/index.js"),a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),o=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),l=n("./node_modules/antd/lib/col/index.js"),i=n.n(l),d=n("./node_modules/antd/lib/form/FormItem.js"),u=n.n(d),c=n("react"),m=n.n(c),p=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"renderFormItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(!e||!e.length)return null;for(var o=24/t,r=[],l=0;l<e.length;l++){var d=e[l],c=d.span;c||(c=d.label&&d.label.length>6?24:o),c=Math.min(24,c);var p=Math.min(24,d.labelSpan?d.labelSpan:Math.round(n*o/c)),b={};d.label?(b.labelCol={span:p},b.wrapperCol={span:24-p}):b.wrapperCol={offset:p};var f=null;if(d.content){var h=Object.assign(Object(a.a)({label:d.label,name:d.name,rules:d.rules,valuePropName:d.valuePropName||"value"},b,{},d.formItemProps,{children:null}));f=d.contentIsFormItem?m.a.cloneElement(d.content,Object.assign(h,d.content.props)):m.a.createElement(u.a,h,d.content)}var j={span:c,formItem:f},v=void 0;r.length&&(v=r[r.length-1]),(!v||v.totalSpan+c>24)&&(v={totalSpan:0,cols:[]},r.push(v)),v.totalSpan+=c,v.cols.push(j)}return r.map((function(e,t){return m.a.createElement(s.a,{key:t},e.cols.map((function(e,t){return m.a.createElement(i.a,{key:t,span:e.span},e.formItem)})))}))}},{key:"renderInlinFormItems",value:function(e){return e&&e.length?e.map((function(e,t){return m.a.createElement(u.a,Object.assign({key:t,label:e.label,name:e.name,rules:e.rules},e.formItemProps),e.content)})):null}}]),e}();t.a=p,"undefined"!==typeof p&&p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"FormUtil",filename:"src/utils/FormUtil.tsx"}})}}]);